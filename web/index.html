<!DOCTYPE html>
<html ng-app="preview">
<head>


   <script type="text/javascript">
     if(window.location.protocol === "file:") {
      //node-webkit
      //dynamically load proxy server logic
      var _ = require('./components/lodash/dist/lodash.js');

      var head= document.getElementsByTagName('head')[0];
      var script= document.createElement('script');
      script.type= 'text/javascript';
      script.src= '../server.js';
      head.appendChild(script);
      require('nw.gui').Window.get().showDevTools();

     }
     else {
      //loaded from proxy
     }
   </script>
    

  <link href="css/main.css" rel="stylesheet" type="text/css">

  <script type="text/javascript" src="components/angular/angular.js"></script>
  <script type="text/javascript" src="components/jQuery/jquery.js"></script>
  <script type="text/javascript" src="components/angular-bootstrap/ui-bootstrap-tpls.js"></script>
  <script type="text/javascript" src="components/lodash/dist/lodash.underscore.js"></script>
  <script src='http://rvaviewer-test.appspot.com/gadgets/gadgets.min.js'></script>

  <!--script type="text/javascript" src="http://viewer-test.appspot.com/gadgets/globals.js"></script> 
<script type="text/javascript" src="http://viewer-test.appspot.com/gadgets/base.js"></script> 
<script type="text/javascript" src="http://viewer-test.appspot.com/gadgets/string.js"></script> 
<script type="text/javascript" src="http://viewer-test.appspot.com/gadgets/urlparams.js"></script> 
<script type="text/javascript" src="http://viewer-test.appspot.com/gadgets/config.js"></script> 
<script type="text/javascript" src="http://viewer-test.appspot.com/gadgets/auth.js"></script> 
<script type="text/javascript" src="http://viewer-test.appspot.com/gadgets/auth-init.js"></script> 
<script type="text/javascript" src="http://viewer-test.appspot.com/gadgets/json-native.js"></script> 
<script type="text/javascript" src="http://viewer-test.appspot.com/gadgets/io.js"></script> 
<script type="text/javascript" src="http://viewer-test.appspot.com/gadgets/onload.js"></script> 
<script type="text/javascript" src="http://viewer-test.appspot.com/gadgets/prefs.js"></script> 
<script type="text/javascript" src="http://viewer-test.appspot.com/gadgets/log.js"></script> 
<script type="text/javascript" src="http://viewer-test.appspot.com/gadgets/wpm.transport.js"></script> 
<script type="text/javascript" src="http://viewer-test.appspot.com/gadgets/rpc.js"></script--> 
  <script type="text/javascript" src="presentationScripts.js"></script>
  <script type="text/javascript" src="app.js"></script>
  <script type="text/javascript" src="ctr-main.js"></script>
  <script type="text/javascript" src="file-watcher/svc-file-watcher.js"></script>
  <script type="text/javascript" src="file-watcher/ctr-file-watch.js"></script>

  <script>
  </script>

</head>
<body ng-controller="mainController">

<div>
<label for="widgetUrl">Widget URL/file: </label>
  <input type="text" id="widgetUrl" ng-model="widgetUrl" style="width: 500px;"/> <input type="file" ng-model-instant id="fileToUpload" onchange="angular.element(this).scope().setWidgetFile(this)" />
  <br />
  <label for="settingsUrl">Settings URL/file: </label>
  <input type="text" id="settingsUrl" ng-model="settingsUrl" style="width: 500px;"/> 
  <input type="file" ng-model-instant id="fileToUpload" onchange="angular.element(this).scope().setSettingsFile(this)" />
</div>

  <input type="button" value="Settings" ng-click="showWidget(settingsUrl)"/>
  <input type="button" value="Preview" ng-click="showWidget(widgetUrl)"/>

  <div id="widget-modal" style="width: 100%; height: 100%; left: 0px; top: 0px; z-index: 1; position: fixed; background-color: white;">
    <div id="controls" style="position: absolute; top: 0; right: 0; z-index: 9999" >
    <button ng-click="play()">Play</button>
    <button ng-click="closeSettings()">Close</button>
    </div>
    <div id="ph1"
      style="width: 100%; height: 100%;">
    </div>
  </div>

  <div ng-controller="fileWatchController" ng-include="'file-watcher/file-watcher.html'">
  </div>

</body>
</html>